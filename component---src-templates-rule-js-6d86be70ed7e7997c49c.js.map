{"version":3,"sources":["webpack:///./src/utils/render-fragments.js","webpack:///./src/components/acknowledgments.js","webpack:///./src/components/rule-table-of-contents.js","webpack:///./src/templates/rule.js","webpack:///./src/components/list-with-heading.js"],"names":["getGlossaryUsed","slug","allGlossary","usedKeys","getGlossaryItemsUsedInRule","includes","push","glossaries","edges","filter","key","node","frontmatter","length","id","href","map","html","title","dangerouslySetInnerHTML","__html","keys","Object","glossaryUsages","forEach","getInputAspects","aspects","ruleFormatInputAspects","className","aspect","aHref","getInputRulesForRule","inputRules","allRules","stripBasePath","inputRuleId","atomicRule","find","rule","fields","replace","name","Acknowledgments","scrollLinkId","items","contributors","preferredAcknowledgmentsOrder","otherItems","reduce","out","curatedItems","Authors","Reviewers","funding","values","split","join","value","data","toLowerCase","target","rel","url","console","warn","defaultProps","authors","previous_authors","reviewers","RuleTableOfContents","toc","useState","isShown","setIsShown","classnames","hide","queries","large","onChange","matches","role","aria-level","query","location","site","tableOfContents","fastmatterAttributes","changelog","relativePath","fileName","ruleChangelog","JSON","parse","parsedFrontmatter","converter","showdown","Converter","siteMetadata","actRulesPackage","repository","config","repositoryUrl","curateGitUrl","ruleId","ruleTestcasesUrl","proposeChangeUrl","changelogUrl","issuesUrl","usedInRules","rulesUsages","validImplementers","implementers","actMapping","mappedRuleId","consistency","makeHtml","rule_type","format","Date","date","accessibility_requirements","cls","headingTemplate","itemKey","itemTemplate","item","to","input_aspects","input_rules","aria-label","aria-hidden","focusable","height","viewBox","width","fillRule","d","description","acknowledgments","acknowledgements","ListWithHeading","heading"],"mappings":"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","file":"component---src-templates-rule-js-6d86be70ed7e7997c49c.js","sourcesContent":["import React from 'react'\nimport glossaryUsages from './../../_data/glossary-usages.json'\n\nexport const getGlossaryUsed = (slug, allGlossary) => {\n\tconst usedKeys = getGlossaryItemsUsedInRule(slug)\n\t// Always show the outcome definition:\n\tif (!usedKeys.includes('#outcome')) {\n\t\tusedKeys.push('#outcome')\n\t}\n\tconst glossaries = allGlossary.edges.filter(({ node }) => {\n\t\tconst {\n\t\t\tfrontmatter: { key },\n\t\t} = node\n\t\treturn usedKeys.includes(`#${key}`)\n\t})\n\tif (!glossaries.length) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<>\n\t\t\t<a id=\"glossary-listing\" href=\"#glossary-listing\">\n\t\t\t\t<h2>Glossary</h2>\n\t\t\t</a>\n\t\t\t{glossaries.map(({ node }) => {\n\t\t\t\tconst { frontmatter, html } = node\n\t\t\t\tconst { key } = frontmatter\n\t\t\t\treturn (\n\t\t\t\t\t<article key={node.id}>\n\t\t\t\t\t\t<a id={key} href={`#${key}`}>\n\t\t\t\t\t\t\t<h3>{frontmatter.title}</h3>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div dangerouslySetInnerHTML={{ __html: html }} />\n\t\t\t\t\t</article>\n\t\t\t\t)\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nexport const getGlossaryItemsUsedInRule = slug => {\n\tconst keys = []\n\tObject.keys(glossaryUsages).forEach(key => {\n\t\tglossaryUsages[key].forEach(({ slug: s }) => {\n\t\t\tif (s === slug && !keys.includes(key)) {\n\t\t\t\tkeys.push(key)\n\t\t\t}\n\t\t})\n\t})\n\treturn keys\n}\n\nexport function getInputAspects(aspects, ruleFormatInputAspects) {\n\tif (!aspects) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<>\n\t\t\t<span className=\"heading\">Input Aspects:</span>\n\t\t\t<ul>\n\t\t\t\t{aspects.map(aspect => {\n\t\t\t\t\tconst aHref = ruleFormatInputAspects[aspect]\n\t\t\t\t\t\t? ruleFormatInputAspects[aspect]\n\t\t\t\t\t\t: ruleFormatInputAspects['default']\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<li key={aspect}>\n\t\t\t\t\t\t\t<a className=\"sc-item block\" href={aHref}>\n\t\t\t\t\t\t\t\t{aspect}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)\n\t\t\t\t})}\n\t\t\t</ul>\n\t\t</>\n\t)\n}\n\nexport function getInputRulesForRule(inputRules, allRules, stripBasePath = false) {\n\tif (!inputRules) {\n\t\treturn null\n\t}\n\treturn (\n\t\t<div className=\"side-notes\">\n\t\t\t<div className=\"meta\">\n\t\t\t\t<span className=\"heading\">Input Rules</span>\n\t\t\t\t<ul>\n\t\t\t\t\t{inputRules.map(inputRuleId => {\n\t\t\t\t\t\tconst atomicRule = allRules.find(rule => rule.node.frontmatter.id === inputRuleId)\n\t\t\t\t\t\tconst aHref = stripBasePath\n\t\t\t\t\t\t\t? atomicRule.node.fields.slug.replace('rules/', '')\n\t\t\t\t\t\t\t: atomicRule.node.fields.slug\n\t\t\t\t\t\tconst name = atomicRule.node.frontmatter.name\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<li key={inputRuleId}>\n\t\t\t\t\t\t\t\t<a className=\"sc-item block\" href={aHref}>\n\t\t\t\t\t\t\t\t\t{name}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t)\n\t\t\t\t\t})}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\n/**\n * Component to render [key,value] pairs, where\n * - `key` is a string\n * - `value` is an array of items\n *\n * This is usually derived from a rule frontmatter, structure of which is as below:\n * acknowledgements:\n *   authors:\n *     - Jey Nandakumar\n *   previous_authors:\n *     - Annika Nietzio\n *\n * @param {Object} props Props\n */\nconst Acknowledgments = ({ scrollLinkId, items, contributors }) => {\n\tconst preferredAcknowledgmentsOrder = ['authors', 'previous_authors', 'reviewers', 'funding']\n\n\tconst otherItems = Object.keys(items).reduce((out, key) => {\n\t\tif (!preferredAcknowledgmentsOrder.includes(key)) {\n\t\t\tout[key] = items[key]\n\t\t}\n\t\treturn out\n\t}, {})\n\n\tconst curatedItems = {\n\t\tAuthors: items['authors'],\n\t\t'Previous Authors': items['previous_authors'],\n\t\tReviewers: items['reviewers'],\n\t\tfunding: items['funding'],\n\t\t...otherItems,\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<a id={scrollLinkId} href={`#${scrollLinkId}`}>\n\t\t\t\t<h2>Acknowledgments</h2>\n\t\t\t</a>\n\t\t\t{Object.keys(curatedItems).map(key => {\n\t\t\t\tconst values = curatedItems[key] || []\n\n\t\t\t\tif (!values || !values.length) {\n\t\t\t\t\treturn null\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\t<div className=\"meta\" key={key}>\n\t\t\t\t\t\t<h3 className=\"heading\">{key.split('_').join(' ')}</h3>\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{values.map(value => {\n\t\t\t\t\t\t\t\tconst data = contributors.find(({ name }) => name.toLowerCase() === value.toLowerCase())\n\t\t\t\t\t\t\t\tif (!data) {\n\t\t\t\t\t\t\t\t\tconsole.warn(`${data}, not in contributor list.`)\n\t\t\t\t\t\t\t\t\treturn null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<li key={data.name}>\n\t\t\t\t\t\t\t\t\t\t<a className=\"sc-item block\" target=\"_blank\" rel=\"noopener noreferrer\" href={data.url}>\n\t\t\t\t\t\t\t\t\t\t\t{data.name}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nAcknowledgments.propTypes = {\n\tscrollLinkId: PropTypes.string.isRequired,\n\titems: PropTypes.object.isRequired,\n\tcontributors: PropTypes.array.isRequired,\n}\n\nAcknowledgments.defaultProps = {\n\tscrollLinkId: ``,\n\titems: {\n\t\tauthors: [],\n\t\tprevious_authors: [],\n\t\treviewers: [],\n\t},\n\tcontributors: [],\n}\n\nexport default Acknowledgments\n","import React, { useState } from 'react'\nimport classnames from 'classnames'\nimport PropTypes from 'prop-types'\nimport ReactMedia from 'react-media'\n\nimport './rule-table-of-contents.scss'\n\nconst RuleTableOfContents = ({ toc }) => {\n\tconst [isShown, setIsShown] = useState(true)\n\n\treturn (\n\t\t<section className={classnames('tableOfContents', { hide: !isShown })}>\n\t\t\t<ReactMedia queries={{ large: '(min-width: 1200px)' }} onChange={matches => setIsShown(matches.large)} />\n\t\t\t<span role=\"heading\" aria-level=\"1\" className=\"heading\">\n\t\t\t\tTable of Contents\n\t\t\t</span>\n\t\t\t<div dangerouslySetInnerHTML={{ __html: toc }} />\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#glossary-listing\">Glossary</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#useful-links\">Useful Links</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#implementation-metrics\">Implementations</a>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\t<a href=\"#acknowledgments\">Acknowledgments</a>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</section>\n\t)\n}\n\nRuleTableOfContents.propTypes = {\n\ttoc: PropTypes.string.isRequired,\n}\n\nexport default RuleTableOfContents\n","import React from 'react'\nimport { graphql, Link } from 'gatsby'\nimport showdown from 'showdown'\nimport { format } from 'date-fns'\nimport SEO from '../components/seo'\nimport Layout from '../components/layout'\nimport Acknowledgments from '../components/acknowledgments'\nimport AccessibilityRequirements from '../components/accessibility_requirements'\nimport ListOfImplementers from '../components/list-of-implementers'\nimport RuleTableOfContents from '../components/rule-table-of-contents'\nimport ListWithHeading from '../components/list-with-heading'\nimport rulesUsages from '../../_data/rules-usages.json'\nimport curateGitUrl from '../../utils/curate-git-url'\nimport { getGlossaryUsed, getInputRulesForRule, getInputAspects } from './../utils/render-fragments'\n\nimport implementers from '../../_data/implementers.json'\n\nimport './rule.scss'\n\nexport default ({ location, data }) => {\n\tconst { rule, allRules, allGlossary, site } = data\n\tconst { html, frontmatter, tableOfContents, fields } = rule\n\tconst { slug, fastmatterAttributes, changelog, fileName } = fields\n\tconst { relativePath } = fileName\n\tconst ruleChangelog = JSON.parse(changelog)\n\tconst parsedFrontmatter = JSON.parse(fastmatterAttributes)\n\tconst converter = new showdown.Converter()\n\tconst { repository, config, contributors } = JSON.parse(site.siteMetadata.actRulesPackage)\n\tconst repositoryUrl = curateGitUrl(repository.url)\n\tconst ruleId = frontmatter.id\n\tconst ruleTestcasesUrl = `/testcases/${ruleId}/rule-${ruleId}-testcases-for-em-report-tool.json`\n\tconst proposeChangeUrl = `${repositoryUrl}/edit/develop/_rules/${relativePath}`\n\tconst changelogUrl = `/rules/${ruleId}/changelog`\n\tconst issuesUrl = `${repositoryUrl}/issues?utf8=%E2%9C%93&q=is%3Aissue+is%3Aopen+${ruleId}+`\n\tconst ruleFormatInputAspects = config['rule-format-metadata']['input-aspects']\n\tconst usedInRules = rulesUsages[ruleId]\n\tconst validImplementers = implementers.filter(({ actMapping }) => {\n\t\tconst validMappings = actMapping.filter(({ ruleId: mappedRuleId, consistency }) => {\n\t\t\treturn mappedRuleId === ruleId && ['consistent', 'partially-consistent'].includes(consistency)\n\t\t})\n\n\t\treturn validMappings.length > 0\n\t})\n\n\treturn (\n\t\t<Layout location={location}>\n\t\t\t<SEO title={`Rule | ${frontmatter.name}`} />\n\t\t\t<section className=\"page-rule\">\n\t\t\t\t{/* rule content */}\n\t\t\t\t<header>\n\t\t\t\t\t{/* title */}\n\t\t\t\t\t<h1\n\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t__html: converter.makeHtml(frontmatter.name),\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</header>\n\t\t\t\t{/* frontmatter */}\n\t\t\t\t<ul className=\"meta\">\n\t\t\t\t\t{frontmatter.rule_type && (\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<span className=\"heading\">Rule Type:</span>\n\t\t\t\t\t\t\t<span>{frontmatter.rule_type}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span className=\"heading\">Rule Id:</span>\n\t\t\t\t\t\t<span> {ruleId}</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<span className=\"heading\">Last modified:</span>\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t{ruleChangelog && ruleChangelog.length ? format(new Date(ruleChangelog[0].date), 'MMM dd, yyyy') : '-'}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<AccessibilityRequirements accessibility_requirements={parsedFrontmatter.accessibility_requirements} />\n\t\t\t\t\t</li>\n\t\t\t\t\t{usedInRules && usedInRules.length > 0 && (\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<ListWithHeading\n\t\t\t\t\t\t\t\tcls={`side-notes`}\n\t\t\t\t\t\t\t\theadingTemplate={() => <span className=\"heading\">Used in rules:</span>}\n\t\t\t\t\t\t\t\titemKey={`slug`}\n\t\t\t\t\t\t\t\titemTemplate={item => (\n\t\t\t\t\t\t\t\t\t<Link to={item.slug}>\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t\t\t\t\t__html: converter.makeHtml(item.name),\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\titems={usedInRules}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t)}\n\t\t\t\t\t<li>{getInputAspects(frontmatter.input_aspects, ruleFormatInputAspects)}</li>\n\t\t\t\t\t<li>{getInputRulesForRule(frontmatter.input_rules, allRules.edges, true)}</li>\n\t\t\t\t</ul>\n\t\t\t\t<hr />\n\t\t\t\t{/* Description */}\n\t\t\t\t<h2 id=\"description\">\n\t\t\t\t\t<a href=\"#description\" aria-label=\"description permalink\" className=\"anchor before\">\n\t\t\t\t\t\t<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" viewBox=\"0 0 16 16\" width=\"16\">\n\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\tfillRule=\"evenodd\"\n\t\t\t\t\t\t\t\td=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t</svg>\n\t\t\t\t\t</a>\n\t\t\t\t\tDescription\n\t\t\t\t</h2>\n\t\t\t\t<div\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: converter.makeHtml(frontmatter.description),\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t{/* html content */}\n\t\t\t\t<div\n\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t__html: html,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<hr />\n\t\t\t\t{/* glossary */}\n\t\t\t\t{getGlossaryUsed(slug, allGlossary)}\n\t\t\t\t<hr />\n\t\t\t\t{/* Useful links */}\n\t\t\t\t<a href=\"#useful-links\" id=\"useful-links\">\n\t\t\t\t\t<h2>Useful Links</h2>\n\t\t\t\t</a>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a target=\"_blank\" rel=\"noopener noreferrer\" href={issuesUrl}>\n\t\t\t\t\t\t\tGithub issues related to this rule\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a rel=\"noopener noreferrer\" href={changelogUrl}>\n\t\t\t\t\t\t\tChangelog\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a target=\"_blank\" rel=\"noopener noreferrer\" href={proposeChangeUrl}>\n\t\t\t\t\t\t\tPropose a change to the rule\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<a target=\"_blank\" rel=\"noopener noreferrer\" href={ruleTestcasesUrl}>\n\t\t\t\t\t\t\tTest case file for use in the WCAG-EM Report Tool\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<hr />\n\t\t\t\t{/* implementations */}\n\t\t\t\t<>\n\t\t\t\t\t<a id=\"implementation-metrics\" href=\"#implementation-metrics\">\n\t\t\t\t\t\t<h2>Implementations</h2>\n\t\t\t\t\t</a>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tThis section is not part of the official rule. It is populated dynamically and not accounted for in the\n\t\t\t\t\t\tchange history or the last modified date. This section will not be included in the rule when it is published\n\t\t\t\t\t\ton the W3C website.\n\t\t\t\t\t</p>\n\t\t\t\t\t<ListOfImplementers implementers={validImplementers} ruleId={ruleId} />\n\t\t\t\t</>\n\t\t\t\t{/* Acknowledgments */}\n\t\t\t\t<Acknowledgments\n\t\t\t\t\tscrollLinkId={`acknowledgments`}\n\t\t\t\t\titems={parsedFrontmatter.acknowledgments || parsedFrontmatter.acknowledgements}\n\t\t\t\t\tcontributors={contributors}\n\t\t\t\t/>\n\t\t\t</section>\n\t\t\t{/* Toc */}\n\t\t\t<RuleTableOfContents toc={tableOfContents} />\n\t\t</Layout>\n\t)\n}\n\nexport const query = graphql`\n\tquery($slug: String!) {\n\t\trule: markdownRemark(fields: { slug: { eq: $slug } }) {\n\t\t\thtml\n\t\t\ttableOfContents\n\t\t\tfrontmatter {\n\t\t\t\tid\n\t\t\t\tname\n\t\t\t\trule_type\n\t\t\t\tdescription\n\t\t\t\tinput_aspects\n\t\t\t\tinput_rules\n\t\t\t}\n\t\t\tfields {\n\t\t\t\tfileName {\n\t\t\t\t\trelativePath\n\t\t\t\t}\n\t\t\t\tslug\n\t\t\t\tfastmatterAttributes\n\t\t\t\tchangelog\n\t\t\t}\n\t\t}\n\t\tallRules: allMarkdownRemark(filter: { fields: { markdownType: { eq: \"rules\" } } }) {\n\t\t\ttotalCount\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\tfields {\n\t\t\t\t\t\tfileName {\n\t\t\t\t\t\t\trelativePath\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmarkdownType\n\t\t\t\t\t\tslug\n\t\t\t\t\t}\n\t\t\t\t\tfrontmatter {\n\t\t\t\t\t\tid\n\t\t\t\t\t\tname\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tallGlossary: allMarkdownRemark(\n\t\t\tsort: { fields: [frontmatter___title], order: ASC }\n\t\t\tfilter: { fields: { markdownType: { eq: \"glossary\" } } }\n\t\t) {\n\t\t\ttotalCount\n\t\t\tedges {\n\t\t\t\tnode {\n\t\t\t\t\tid\n\t\t\t\t\thtml\n\t\t\t\t\tfrontmatter {\n\t\t\t\t\t\ttitle\n\t\t\t\t\t\tkey\n\t\t\t\t\t}\n\t\t\t\t\tfields {\n\t\t\t\t\t\tmarkdownType\n\t\t\t\t\t}\n\t\t\t\t\texcerpt\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tsite {\n\t\t\tsiteMetadata {\n\t\t\t\tactRulesPackage\n\t\t\t}\n\t\t}\n\t}\n`\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nconst ListWithHeading = ({ cls, headingTemplate, itemKey, itemTemplate, items = [] }) => {\n\treturn (\n\t\t<div className={cls}>\n\t\t\t{/* title  */}\n\t\t\t{headingTemplate()}\n\t\t\t{/* when there are no items, show a no data note  */}\n\t\t\t{(!items || !items.length) && <div className=\"note\">No Data</div>}\n\t\t\t{/* render items if they exist  */}\n\t\t\t{items.length > 0 && (\n\t\t\t\t<ul>\n\t\t\t\t\t{items.map(item => (\n\t\t\t\t\t\t<li key={item[itemKey]}>{itemTemplate(item)}</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nListWithHeading.propTypes = {\n\tcls: PropTypes.string,\n\titemKey: PropTypes.string,\n\theadingTemplate: PropTypes.func.isRequired,\n\titemTemplate: PropTypes.func.isRequired,\n\titems: PropTypes.array,\n}\n\nListWithHeading.defaultProps = {\n\tcls: ``,\n\theading: ``,\n\titems: [],\n}\n\nexport default ListWithHeading\n"],"sourceRoot":""}